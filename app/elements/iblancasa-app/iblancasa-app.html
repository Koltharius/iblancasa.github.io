
<link rel="import" href="../../bower_components/polymer/polymer.html">

<link rel="import" href="../../bower_components/app-layout/app-drawer-layout/app-drawer-layout.html">
<link rel="import" href="../../bower_components/app-layout/app-drawer/app-drawer.html">
<link rel="import" href="../../bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="../../bower_components/app-layout/app-header-layout/app-header-layout.html">
<link rel="import" href="../../bower_components/app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-media-query/iron-media-query.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/paper-menu/paper-menu.html">
<link rel="import" href="../../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../../bower_components/paper-styles/color.html">
<link rel="import" href="../../bower_components/paper-styles/typography.html">
<link rel="import" href="../../bower_components/neon-animation/neon-animated-pages.html">
<link rel="import" href="../../bower_components/neon-animation/neon-animations.html">

<link rel="import" href="../../bower_components/paper-toast/paper-toast.html">
<link rel="import" href="../../bower_components/carbon-route/carbon-route.html">
<link rel="import" href="../../bower_components/carbon-route/carbon-location.html">


<link rel="import" href="../../bower_components/platinum-sw/platinum-sw-cache.html">
<link rel="import" href="../../bower_components/platinum-sw/platinum-sw-register.html">



<link rel="import" href="inicio.html">
<link rel="import" href="sobre-mi.html">
<link rel="import" href="events-page.html">

<dom-module id="iblancasa-app">

  <template>

    <style>
      app-toolbar {
        background-color: var(--paper-light-blue-800);
      }
      .main-header {
        box-shadow: 0px 5px 6px -3px rgba(0, 0, 0, 0.4);
      }
      paper-tabs {
        max-width: 640px;
        --paper-tabs-selection-bar-color: #fff;
      }
      paper-tab {
        color: #fff
        --paper-tab-ink: #aaa;
        text-transform: uppercase;
      }
      .menu-button{
        color: white;
      }
      [hidden] {
        display: none !important;
      }

      .linkroute{
        height: 35% !important;
        text-align: center;
        color: white;
        text-decoration: none;
      }

      .titleApp{
        @apply(--paper-font-title);
        color: white;
      }
    </style>


    <carbon-location route="{{route}}" use-hash-as-path></carbon-location>
     <carbon-route route="{{route}}" pattern="/:page" data="{{data}}"></carbon-route>

    <app-drawer-layout force-narrow>

      <app-drawer style="z-index:4;" id="drawer">

        <!--Móvil -->
        <paper-menu  selected="{{data.page}}" attr-for-selected="name">
            <paper-item name="home">Inicio</paper-item>
            <paper-item name="about">Sobre mí</paper-item>
            <paper-item name="events">Eventos</paper-item>
        </paper-menu>

      </app-drawer>

      <app-header-layout>
        <app-header class="main-header">

          <app-toolbar>
            <paper-icon-button class="menu-button" icon="menu" drawer-toggle hidden$="{{wideLayout}}"></paper-icon-button>
            <h1 class="titleApp">Israel Blancas - iblancasa</h1>
          </app-toolbar>

          <app-toolbar class="tabs-bar" style="height: 56px;padding: 0 8px;" hidden$="{{!wideLayout}}">
            <!-- Escritorio -->

            <paper-tabs selected="{{data.page}}" attr-for-selected="name" bottom-item>
                <paper-tab name="home">
                    <a class="linkroute" href="#/home" data-route="inicio">Inicio</a>
                </paper-tab>
                <paper-tab name="about">
                    <a class="linkroute" href="#/about" data-route="about">Sobre mí</a>
                </paper-tab>
                <paper-tab name="events">
                    <a class="linkroute" href="#/events" data-route="events">Eventos</a>
                </paper-tab>
            </paper-tabs>

          </app-toolbar>

        </app-header>
      </app-header-layout>

    </app-drawer-layout>

    <iron-media-query query="min-width: 600px" query-matches="{{wideLayout}}"></iron-media-query>

   <neon-animated-pages
                entryAnimation="slide-from-top-animation"
                selected="[[data.page]]"
                attr-for-selected="data-route"
                fallback-selection="404">
      <inicio-page data-route="home"></inicio-page>
      <sobre-mi data-route="about"></sobre-mi>
      <events-page data-route="events"></events-page>
    </neon-animated-pages>

    <paper-toast id="cachingComplete"
                 duration="6000"
                 text="Caching complete! This app will work offline.">
    </paper-toast>
    <platinum-sw-register id="swr"
                             auto-register
                             clients-claim
                             skip-waiting
                             base-uri="../../bower_components/platinum-sw/bootstrap"
                             on-service-worker-installed="display">
         <platinum-sw-cache default-cache-strategy="fastest"
         cache-config-file="../../cache-config.json">
         </platinum-sw-cache>
       </platinum-sw-register>

  </template>




  <script>
   window.addEventListener('WebComponentsReady', function() {
      Polymer({
        is: 'iblancasa-app',
        properties: {
          route:{
            type: Object
          },
          wideLayout: {
            type: Boolean,
            value: false,
            observer: 'onLayoutChange',
          },
        },
        ready: function() {
          // TODO: Remove this async https://github.com/PolymerElements/carbon-route/issues/44
          this.async(function() {
            if (!this.route.path) {
              this.set('route.path', '/home');
            }
          },1);
        },
        _drawerSelected: function() {
             if (!this.$.drawer.persistent) {
               this.$.drawer.close();
             }
           },

        onLayoutChange: function(wide) {
          var drawer = this.$.drawer;
          if (wide && drawer.opened) {
            drawer.opened = false;
          }
        },
        display: function() {
        // Check to make sure caching is actually enabled—it won't be in the dev environment.
        if (!this.$.swRegister.disabled) {
          this.$.cachingComplete.show();
        }
      }
      });
    });
  </script>

</dom-module>
